{
  "id": "guide/migration-update-module-and-target-compiler-options",
  "title": "Update module and target compiler options migration",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/migration-update-module-and-target-compiler-options.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"update-module-and-target-compiler-options-migration\" translation-result=\"on\">更新 <code>module</code> 和 <code>target</code> 编译器选项的迁移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"update-module-and-target-compiler-options-migration\">Update <code>module</code> and <code>target</code> compiler options migration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"what-does-this-migration-do\" translation-result=\"on\">此迁移有什么作用？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"what-does-this-migration-do\">What does this migration do?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">此迁移将调整工作区的 <a href=\"guide/typescript-configuration\">TypeScript 配置文件</a>中的 <a href=\"https://www.typescriptlang.org/v2/en/tsconfig#target\"><code>target</code></a> 和 <a href=\"https://www.typescriptlang.org/v2/en/tsconfig#module\"><code>module</code></a> 设置。对每个选项的更改根据使用 TypeScript 配置文件的构建器或命令而有所不同。除非另有说明，否则仅当自创建项目以来未更改过现有值的情况下才进行更改。此过程有助于确保对这些选项进行的更改都是符合意图的。</p><p translation-origin=\"off\">This migration adjusts the <a href=\"https://www.typescriptlang.org/v2/en/tsconfig#target\"><code>target</code></a> and <a href=\"https://www.typescriptlang.org/v2/en/tsconfig#module\"><code>module</code></a> settings within the <a href=\"guide/typescript-configuration\">TypeScript configuration files</a> for the workspace.\nThe changes to each option vary based on the builder or command that uses the TypeScript configuration file.\nUnless otherwise noted, changes are only made if the existing value was not changed since the project was created.\nThis process helps ensure that intentional changes to the options are kept in place.</p>\n\n<table>\n<thead>\n<tr>\n<th><p translation-result=\"on\">TypeScript 配置文件</p><p translation-origin=\"off\">TypeScript Configuration File(s)</p></th>\n<th><p translation-result=\"on\">属性变更</p><p translation-origin=\"off\">Changed Property</p></th>\n<th><p translation-result=\"on\">现有值</p><p translation-origin=\"off\">Existing Value</p></th>\n<th><p translation-result=\"on\">新值</p><p translation-origin=\"off\">New Value</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td><code>&#x3C;workspace base>/tsconfig.json</code></td>\n<td><code>\"module\"</code></td>\n<td><code>\"esnext\"</code></td>\n<td><code>\"es2020\"</code></td>\n</tr>\n<tr>\n<td><p translation-result=\"on\">在 <code><a href=\"api/animations/browser\" class=\"code-anchor\">browser</a></code> 构建器选项中使用（用于应用程序的 <code>ng build</code>）</p><p translation-origin=\"off\">Used in <code><a href=\"api/animations/browser\" class=\"code-anchor\">browser</a></code> builder options (<code>ng build</code> for applications)</p></td>\n<td><code>\"module\"</code></td>\n<td><code>\"esnext\"</code></td>\n<td><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td><p translation-result=\"on\">在 <code>ng-packagr</code> 构建器选项中使用（用于库的 <code>ng build</code>）</p><p translation-origin=\"off\">Used in <code>ng-packagr</code> builder options (<code>ng build</code> for libraries)</p></td>\n<td><code>\"module\"</code></td>\n<td><code>\"esnext\"</code></td>\n<td><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td><p translation-result=\"on\">在 <code>karma</code> 器选项中使用（用于应用程序的 <code>ng test</code>）</p><p translation-origin=\"off\">Used in <code>karma</code> builder options (<code>ng test</code> for applications)</p></td>\n<td><code>\"module\"</code></td>\n<td><code>\"esnext\"</code></td>\n<td><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td><p translation-result=\"on\">在 <code>server</code> 构建器选项中使用（通用）</p><p translation-origin=\"off\">Used in <code>server</code> builder options (universal)</p></td>\n<td><code>\"module\"</code></td>\n<td><code>\"commonjs\"</code></td>\n<td><p translation-result=\"on\"><em>已移除</em></p><p translation-origin=\"off\"><em>removed</em></p></td>\n</tr>\n\n<tr>\n<td><p translation-result=\"on\">在 <code>server</code> 构建器选项中使用（通用）</p><p translation-origin=\"off\">Used in <code>server</code> builder options (universal)</p></td>\n<td><code>\"target\"</code></td>\n<td><p translation-result=\"on\"><em>任何</em></p><p translation-origin=\"off\"><em>any</em></p></td>\n<td><code>\"es2016\"</code></td>\n</tr>\n\n<tr>\n<td><p translation-result=\"on\">在 <code>protractor</code> 构建器选项中使用（用于应用程序的 <code>ng e2e</code>）</p><p translation-origin=\"off\">Used in <code>protractor</code> builder options (<code>ng e2e</code> for applications)</p></td>\n<td><code>\"target\"</code></td>\n<td><code>\"es5\"</code></td>\n<td><code>\"es2018\"</code></td>\n</tr>\n\n</tbody>\n</table>\n<h2 id=\"why-is-this-migration-necessary\" translation-result=\"on\">为什么需要此迁移？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"why-is-this-migration-necessary\">Why is this migration necessary?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">此迁移通过更新项目，让它使用建议的最佳实践编译选项，来改善项目的长期支持能力。</p><p translation-origin=\"off\">This migration provides improvements to the long-term supportability of projects by updating the projects to use recommended best practice compilation options.</p>\n\n<p translation-result=\"on\">对于要在 Node.js 上执行的功能（例如 Universal 和 Protractor），新设置还提供了性能和故障排除方面的优势。Angular CLI 的最低 Node.js 版本（v10.13）支持 ES2018 及更早版本中的功能。通过瞄准更高版本的 ES，编译器可以转换更少的代码，并且可以直接使用新特性。由于 zone.js 不支持原生 <code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">async</a></code> 和 <code>await</code> ，因此通用版本仍以 ES2016 为目标。</p><p translation-origin=\"off\">For the functionality that executes on Node.js, such as Universal and Protractor, the new settings provide performance and troubleshooting benefits as well.\nThe minimum Node.js version for the Angular CLI (v10.13) supports features in ES2018 and earlier.\nBy targeting later ES versions, the compiler transforms less code and can use newer features directly.\nSince zone.js does not support native <code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">async</a></code> and <code>await</code>, the universal builds still target ES2016.</p>\n\n<h2 id=\"why-es2020-instead-of-esnext\" translation-result=\"on\">为什么用 <code>\"es2020\"</code> 代替 <code>\"esnext\"</code> ？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"why-es2020-instead-of-esnext\">Why <code>\"es2020\"</code> instead of <code>\"esnext\"</code>?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在 TypeScript 3.9 中，由 <code>module</code> 控制的 TypeScript 编译器的行为与 <code>\"esnext\"</code> 和 <code>\"es2020\"</code> 值相同。此行为将来可能会更改，因为 <code>\"esnext\"</code> 选项可能会以向后不兼容的方式发展，从而导致在 TypeScript 更新时导致构建期或运行期错误。其后果是，代码可能变得不稳定。使用 <code>\"es2020\"</code> 选项可减轻此风险。</p><p translation-origin=\"off\">In TypeScript 3.9, the behavior of the TypeScript compiler controlled by <code>module</code> is the same with both <code>\"esnext\"</code> and <code>\"es2020\"</code> values.\nThis behavior can change in the future, because the <code>\"esnext\"</code> option could evolve in a backwards incompatible ways, resulting in build-time or run-time errors during a TypeScript update.\nAs a result, code can become unstable. Using the <code>\"es2020\"</code> option mitigates this risk.</p>\n\n\n  \n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/AsyncPipe\n - guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\n - guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\n - guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\n - guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\n - guide/typescript-configuration\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/migration-update-module-and-target-compiler-options.md?message=docs%3A%20请简述你的修改...\n - https://www.typescriptlang.org/v2/en/tsconfig#module\n - https://www.typescriptlang.org/v2/en/tsconfig#target\n-->"
}