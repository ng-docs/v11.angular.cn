{"id":"start/start-forms","title":"Using forms for user input","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/start/start-forms.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"using-forms-for-user-input\" translation-result=\"on\">使用表单进行用户输入<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#using-forms-for-user-input\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"using-forms-for-user-input\">Using forms for user input<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#using-forms-for-user-input\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">本指南基于“入门教程”<a href=\"start\" title=\"开始使用基本的 Angular 应用\">基本 Angular 应用</a>中的第三步<a href=\"start/start-data\" title=\"尝试一下：管理数据\">“管理数据”</a>。</p><p translation-origin=\"off\">This guide builds on the <a href=\"start/start-data\" title=\"Try it: Managing Data\">Managing Data</a> step of the Getting Started tutorial, <a href=\"start\" title=\"Get started with a basic Angular app\">Get started with a basic Angular app</a>.</p>\n\n<p translation-result=\"on\">本节将引导你添加基于表单的结账功能，以收集用户信息作为结账信息的一部分。</p><p translation-origin=\"off\">This section walks you through adding a form-based checkout feature to collect user information as part of checkout.</p>\n\n<h2 id=\"define-the-checkout-form-model\" translation-result=\"on\">定义结帐表单模型<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#define-the-checkout-form-model\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"define-the-checkout-form-model\">Define the checkout form model<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#define-the-checkout-form-model\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">此步骤说明如何在组件类中建立结帐表单模型。表单模型决定表单的状态。</p><p translation-origin=\"off\">This step shows you how to set up the checkout form model in the component class.\nThe form model determines the status of the form.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">打开 <code>cart.component.ts</code> 。</p><p translation-origin=\"off\">Open <code>cart.component.ts</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">从 <code>@angular/forms</code> 包导入 <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>。此服务提供了用来生成控件的便捷方法。</p><p translation-origin=\"off\">Import the <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> service from the <code>@angular/forms</code> package.\nThis service provides convenient methods for generating controls.</p>\n\n<code-example header=\"src/app/cart/cart.component.ts\" path=\"getting-started/src/app/cart/cart.component.ts\" region=\"imports\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a> } from '@angular/forms';\n\nimport { CartService } from '../cart.service';\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">在 <code>CartComponent</code> 的 <code>constructor()</code> 中注入 <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> 服务。该服务是你已经导入过的 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 模块的一部分。</p><p translation-origin=\"off\">Inject the <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> service in the <code>CartComponent</code> <code>constructor()</code>.\nThis service is part of the <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> module, which you've already imported.</p>\n\n<code-example header=\"src/app/cart/cart.component.ts\" path=\"getting-started/src/app/cart/cart.component.ts\" region=\"inject-form-builder\">\nexport class CartComponent {\n  constructor(\n    private cartService: CartService,\n    private formBuilder: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>,\n    ) {}\n}\n\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">要收集用户的姓名和地址，请使用 <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> 的 <code>group()</code> 方法来把 <code>checkoutForm</code> 属性设置为一个包含 <code>name</code> 和 <code>address</code> 字段的表单模型。</p><p translation-origin=\"off\">To gather the user's name and address, use the <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> <code>group()</code> method to set the <code>checkoutForm</code> property to a form model containing <code>name</code> and <code>address</code> fields.</p>\n\n<code-example header=\"src/app/cart/cart.component.ts\" path=\"getting-started/src/app/cart/cart.component.ts\" region=\"checkout-form-group\">\nexport class CartComponent {\n  items = this.cartService.getItems();\n  checkoutForm = this.formBuilder.group({\n    name: '',\n    address: ''\n  });\n  constructor(\n    private cartService: CartService,\n    private formBuilder: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>,\n    ) {}\n}\n\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">定义一个 <code>onSubmit()</code> 方法来处理表单。该方法允许用户提交其姓名和地址。此外，此方法会使用 <code>CartService</code> 的 <code>clearCart()</code> 方法重置表单并清除购物车。</p><p translation-origin=\"off\">Define an <code>onSubmit()</code> method to process the form.\nThis method allows users to submit their name and address.\nIn addition, this method uses the <code>clearCart()</code> method of the <code>CartService</code> to reset the form and clear the cart.</p>\n\n<p translation-result=\"on\">整个购物车组件类如下：</p><p translation-origin=\"off\">The entire cart component class is as follows:</p>\n\n<code-example header=\"src/app/cart/cart.component.ts\" path=\"getting-started/src/app/cart/cart.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a> } from '@angular/forms';\n\nimport { CartService } from '../cart.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent {\n  items = this.cartService.getItems();\n  checkoutForm = this.formBuilder.group({\n    name: '',\n    address: ''\n  });\n  constructor(\n    private cartService: CartService,\n    private formBuilder: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>,\n    ) {}\n\n  onSubmit(): void {\n    // Process checkout data here\n    this.items = this.cartService.clearCart();\n    console.warn('Your order has been submitted', this.checkoutForm.value);\n    this.checkoutForm.reset();\n  }\n}\n\n\n</code-example>\n</li>\n</ol>\n<h2 id=\"create-the-checkout-form\" translation-result=\"on\">创建结帐表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#create-the-checkout-form\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"create-the-checkout-form\">Create the checkout form<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#create-the-checkout-form\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">使用以下步骤在“购物车”视图的底部添加一个结帐表单。</p><p translation-origin=\"off\">Use the following steps to add a checkout form at the bottom of the Cart view.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在 <code>cart.component.html</code> 的底部，添加一个 HTML <code>&#x3C;form></code> 元素和一个 <strong>Purchase</strong> 按钮。</p><p translation-origin=\"off\">At the bottom of <code>cart.component.html</code>, add an HTML <code>&#x3C;form></code> element and a <strong>Purchase</strong> button.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">使用 <code>formGroup</code> 属性绑定将 <code>checkoutForm</code> 绑定到 HTML 中的 <code>&#x3C;form></code> 标签。</p><p translation-origin=\"off\">Use a <code>formGroup</code> property binding to bind <code>checkoutForm</code> to the HTML <code>&#x3C;form></code>.</p>\n\n<code-example header=\"src/app/cart/cart.component.html\" path=\"getting-started/src/app/cart/cart.component.3.html\" region=\"checkout-form\">\n&#x3C;form [formGroup]=\"checkoutForm\">\n\n  &#x3C;button class=\"button\" type=\"submit\">Purchase&#x3C;/button>\n\n&#x3C;/form>\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">在 <code>form</code> 标签上，使用 <code>ngSubmit</code> 事件绑定来侦听表单提交，并以 <code>checkoutForm</code> 的值为参数调用 <code>onSubmit()</code> 方法。</p><p translation-origin=\"off\">On the <code>form</code> tag, use an <code>ngSubmit</code> event binding to listen for the form submission and call the <code>onSubmit()</code> method with the <code>checkoutForm</code> value.</p>\n\n<code-example path=\"getting-started/src/app/cart/cart.component.html\" header=\"src/app/cart/cart.component.html (cart component template detail)\" region=\"checkout-form-1\">\n&#x3C;form [formGroup]=\"checkoutForm\" (ngSubmit)=\"onSubmit()\">\n&#x3C;/form>\n\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">添加 <code>name</code> 和 <code>address</code> 的 <code>&#x3C;input></code> 字段，每个字段都有一个 <code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a></code> 属性，该属性绑定到 <code>checkoutForm</code> 表单控件，以将 <code>name</code> 和 <code>address</code> 绑定到其 <code>&#x3C;input></code> 字段。完整的组件如下：</p><p translation-origin=\"off\">Add <code>&#x3C;input></code> fields for <code>name</code> and <code>address</code>, each with a <code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a></code> attribute that binds to the <code>checkoutForm</code> form controls for <code>name</code> and <code>address</code> to their <code>&#x3C;input></code> fields.\nThe complete component is as follows:</p>\n\n<code-example path=\"getting-started/src/app/cart/cart.component.html\" header=\"src/app/cart/cart.component.html\" region=\"checkout-form-2\">\n&#x3C;h3>Cart&#x3C;/h3>\n\n&#x3C;p>\n  &#x3C;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/shipping\">Shipping Prices&#x3C;/a>\n&#x3C;/p>\n\n&#x3C;div class=\"cart-item\" *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let item of items\">\n  &#x3C;span>{{ item.name }} &#x3C;/span>\n  &#x3C;span>{{ item.price | <a href=\"api/common/CurrencyPipe\" class=\"code-anchor\">currency</a> }}&#x3C;/span>\n&#x3C;/div>\n\n&#x3C;form [formGroup]=\"checkoutForm\" (ngSubmit)=\"onSubmit()\">\n\n  &#x3C;div>\n    &#x3C;label for=\"name\">\n      Name\n    &#x3C;/label>\n    &#x3C;input id=\"name\" type=\"text\" <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"name\">\n  &#x3C;/div>\n\n  &#x3C;div>\n    &#x3C;label for=\"address\">\n      Address\n    &#x3C;/label>\n    &#x3C;input id=\"address\" type=\"text\" <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"address\">\n  &#x3C;/div>\n\n  &#x3C;button class=\"button\" type=\"submit\">Purchase&#x3C;/button>\n\n&#x3C;/form>\n\n\n</code-example>\n</li>\n</ol>\n<p translation-result=\"on\">将少量物品放入购物车后，用户可以查看他们的物品，输入他们的姓名和地址，然后提交购买的商品。</p><p translation-origin=\"off\">After putting a few items in the cart, users can review their items, enter their name and address, and submit their purchase.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/start/cart-with-items-and-form.png\" alt=\"Cart view with checkout form\" width=\"261\" height=\"395\">\n</div>\n<p translation-result=\"on\">要确认提交，请打开控制台以查看包含你所提交的名称和地址的对象。</p><p translation-origin=\"off\">To confirm submission, open the console to see an object containing the name and address you submitted.</p>\n\n<h2 id=\"whats-next\" translation-result=\"on\">下一步是什么<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#whats-next\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"whats-next\">What's next<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"start/start-forms#whats-next\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你现在有了一个具备产品目录、购物车和结帐功能的完整在线商店应用。</p><p translation-origin=\"off\">You have a complete online store application with a product catalog, a shopping cart, and a checkout function.</p>\n\n<p translation-result=\"on\"><a href=\"start/start-deployment\" title=\"试试看：部署\">继续前往“部署”部分</a>，以进行本地开发，或将此应用部署到 Firebase 或你自己的服务器。</p><p translation-origin=\"off\"><a href=\"start/start-deployment\" title=\"Try it: Deployment\">Continue to the \"Deployment\" section</a> to move to local development, or deploy your app to Firebase or your own server.</p>\n\n\n  \n</div>\n\n\n<!-- links to this doc:\n - start/start-data\n-->\n<!-- links from this doc:\n - api/common/CurrencyPipe\n - api/common/NgForOf\n - api/core/Component\n - api/forms/FormBuilder\n - api/forms/FormControlName\n - api/forms/ReactiveFormsModule\n - api/router/RouterLink\n - start\n - start/start-data\n - start/start-deployment\n - start/start-forms#create-the-checkout-form\n - start/start-forms#define-the-checkout-form-model\n - start/start-forms#using-forms-for-user-input\n - start/start-forms#whats-next\n - https://github.com/angular/angular-cn/edit/aio/aio/content/start/start-forms.md?message=docs%3A%20请简述你的修改...\n-->"}